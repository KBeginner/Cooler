
三次握手，即客户端和服务器端建立连接。

第一次：客户端向服务器发送连接请求报文（携带SYN序列号）；
第二次：服务器接收到连接请求报文后，向客户端发送确认连接报文（携带SYN和ACK）；
第三次：客户端再向服务器发送报文一切已就绪，然后服务器与客户端建立连接成功。

为什么连接请求不是二次握手？
为了防止网络超时等失败请求导致服务器资源浪费的现象。
第一次连接请求超时了，客户端就对该请求做失效处理，但是等到网速恢复后服务器端还是能接收到请求，并向服务器发送连接成功确认，然而这时客户端接收不到这个确认请求（因为已做失效处理），客户端不会发送数据包请求，但是服务器一直处于开启等待连接的状态，直到连接超时，这个过程就会浪费服务器资源。




四次握手，即客户端和服务器端断开连接。

第一次：客户端向服务器端发送关闭连接请求报文，并停止发送数据（携带FIN和seq序列号）；
第二次：服务器端向客户端回应关闭请求已收到，并处于关闭等待的状态（携带seq和ack）；
第三次：等到所有请求都结束数据传输时，服务器向客户端发送关闭确认请求；
第四次：客户端向服务器发送已确认关闭报文，服务器关闭请求；

为什么关闭请求不能是三次？
因为第二次和第三次之间可能会存在未传输完数据的请求。